{"version":3,"file":"effects.mjs","names":[],"sources":["../../src/bcs/effects.ts"],"sourcesContent":["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { bcs } from '@mysten/bcs';\n\nimport { Address, ObjectDigest, Owner, SuiObjectRef, TypeTag } from './bcs.js';\n\n// Rust: crates/sui-types/src/execution_status.rs (PackageUpgradeError enum)\nconst PackageUpgradeError = bcs.enum('PackageUpgradeError', {\n\tUnableToFetchPackage: bcs.struct('UnableToFetchPackage', { packageId: Address }),\n\tNotAPackage: bcs.struct('NotAPackage', { objectId: Address }),\n\tIncompatibleUpgrade: null,\n\tDigestDoesNotMatch: bcs.struct('DigestDoesNotMatch', { digest: bcs.byteVector() }),\n\tUnknownUpgradePolicy: bcs.struct('UnknownUpgradePolicy', { policy: bcs.u8() }),\n\tPackageIDDoesNotMatch: bcs.struct('PackageIDDoesNotMatch', {\n\t\tpackageId: Address,\n\t\tticketId: Address,\n\t}),\n});\n\n// Rust: move-core-types/src/language_storage.rs\nconst ModuleId = bcs.struct('ModuleId', {\n\taddress: Address,\n\tname: bcs.string(),\n});\n// Rust: crates/sui-types/src/execution_status.rs\nconst MoveLocation = bcs.struct('MoveLocation', {\n\tmodule: ModuleId,\n\tfunction: bcs.u16(),\n\tinstruction: bcs.u16(),\n\tfunctionName: bcs.option(bcs.string()),\n});\n\n// Rust: crates/sui-types/src/execution_status.rs\nconst CommandArgumentError = bcs.enum('CommandArgumentError', {\n\tTypeMismatch: null,\n\tInvalidBCSBytes: null,\n\tInvalidUsageOfPureArg: null,\n\tInvalidArgumentToPrivateEntryFunction: null,\n\tIndexOutOfBounds: bcs.struct('IndexOutOfBounds', { idx: bcs.u16() }),\n\tSecondaryIndexOutOfBounds: bcs.struct('SecondaryIndexOutOfBounds', {\n\t\tresultIdx: bcs.u16(),\n\t\tsecondaryIdx: bcs.u16(),\n\t}),\n\tInvalidResultArity: bcs.struct('InvalidResultArity', { resultIdx: bcs.u16() }),\n\tInvalidGasCoinUsage: null,\n\tInvalidValueUsage: null,\n\tInvalidObjectByValue: null,\n\tInvalidObjectByMutRef: null,\n\tSharedObjectOperationNotAllowed: null,\n\tInvalidArgumentArity: null,\n\tInvalidTransferObject: null,\n\tInvalidMakeMoveVecNonObjectArgument: null,\n\tArgumentWithoutValue: null,\n\tCannotMoveBorrowedValue: null,\n\tCannotWriteToExtendedReference: null,\n\tInvalidReferenceArgument: null,\n});\n\n// Rust: crates/sui-types/src/execution_status.rs\nconst TypeArgumentError = bcs.enum('TypeArgumentError', {\n\tTypeNotFound: null,\n\tConstraintNotSatisfied: null,\n});\n\n// Rust: crates/sui-types/src/execution_status.rs\nconst ExecutionFailureStatus = bcs.enum('ExecutionFailureStatus', {\n\tInsufficientGas: null,\n\tInvalidGasObject: null,\n\tInvariantViolation: null,\n\tFeatureNotYetSupported: null,\n\tMoveObjectTooBig: bcs.struct('MoveObjectTooBig', {\n\t\tobjectSize: bcs.u64(),\n\t\tmaxObjectSize: bcs.u64(),\n\t}),\n\tMovePackageTooBig: bcs.struct('MovePackageTooBig', {\n\t\tobjectSize: bcs.u64(),\n\t\tmaxObjectSize: bcs.u64(),\n\t}),\n\tCircularObjectOwnership: bcs.struct('CircularObjectOwnership', { object: Address }),\n\tInsufficientCoinBalance: null,\n\tCoinBalanceOverflow: null,\n\tPublishErrorNonZeroAddress: null,\n\tSuiMoveVerificationError: null,\n\tMovePrimitiveRuntimeError: bcs.option(MoveLocation),\n\tMoveAbort: bcs.tuple([MoveLocation, bcs.u64()]),\n\tVMVerificationOrDeserializationError: null,\n\tVMInvariantViolation: null,\n\tFunctionNotFound: null,\n\tArityMismatch: null,\n\tTypeArityMismatch: null,\n\tNonEntryFunctionInvoked: null,\n\tCommandArgumentError: bcs.struct('CommandArgumentError', {\n\t\targIdx: bcs.u16(),\n\t\tkind: CommandArgumentError,\n\t}),\n\tTypeArgumentError: bcs.struct('TypeArgumentError', {\n\t\targumentIdx: bcs.u16(),\n\t\tkind: TypeArgumentError,\n\t}),\n\tUnusedValueWithoutDrop: bcs.struct('UnusedValueWithoutDrop', {\n\t\tresultIdx: bcs.u16(),\n\t\tsecondaryIdx: bcs.u16(),\n\t}),\n\tInvalidPublicFunctionReturnType: bcs.struct('InvalidPublicFunctionReturnType', {\n\t\tidx: bcs.u16(),\n\t}),\n\tInvalidTransferObject: null,\n\tEffectsTooLarge: bcs.struct('EffectsTooLarge', { currentSize: bcs.u64(), maxSize: bcs.u64() }),\n\tPublishUpgradeMissingDependency: null,\n\tPublishUpgradeDependencyDowngrade: null,\n\tPackageUpgradeError: bcs.struct('PackageUpgradeError', { upgradeError: PackageUpgradeError }),\n\tWrittenObjectsTooLarge: bcs.struct('WrittenObjectsTooLarge', {\n\t\tcurrentSize: bcs.u64(),\n\t\tmaxSize: bcs.u64(),\n\t}),\n\tCertificateDenied: null,\n\tSuiMoveVerificationTimedout: null,\n\tSharedObjectOperationNotAllowed: null,\n\tInputObjectDeleted: null,\n\tExecutionCancelledDueToSharedObjectCongestion: bcs.struct(\n\t\t'ExecutionCancelledDueToSharedObjectCongestion',\n\t\t{\n\t\t\tcongested_objects: bcs.vector(Address),\n\t\t},\n\t),\n\tAddressDeniedForCoin: bcs.struct('AddressDeniedForCoin', {\n\t\taddress: Address,\n\t\tcoinType: bcs.string(),\n\t}),\n\tCoinTypeGlobalPause: bcs.struct('CoinTypeGlobalPause', { coinType: bcs.string() }),\n\tExecutionCancelledDueToRandomnessUnavailable: null,\n\tMoveVectorElemTooBig: bcs.struct('MoveVectorElemTooBig', {\n\t\tvalueSize: bcs.u64(),\n\t\tmaxScaledSize: bcs.u64(),\n\t}),\n\tMoveRawValueTooBig: bcs.struct('MoveRawValueTooBig', {\n\t\tvalueSize: bcs.u64(),\n\t\tmaxScaledSize: bcs.u64(),\n\t}),\n\tInvalidLinkage: null,\n\tInsufficientBalanceForWithdraw: null,\n\tNonExclusiveWriteInputObjectModified: bcs.struct('NonExclusiveWriteInputObjectModified', {\n\t\tid: Address,\n\t}),\n});\n\n// Rust: crates/sui-types/src/execution_status.rs\nexport const ExecutionStatus = bcs.enum('ExecutionStatus', {\n\tSuccess: null,\n\tFailure: bcs.struct('Failure', {\n\t\terror: ExecutionFailureStatus,\n\t\tcommand: bcs.option(bcs.u64()),\n\t}),\n});\n\n// Rust: crates/sui-types/src/gas.rs\nconst GasCostSummary = bcs.struct('GasCostSummary', {\n\tcomputationCost: bcs.u64(),\n\tstorageCost: bcs.u64(),\n\tstorageRebate: bcs.u64(),\n\tnonRefundableStorageFee: bcs.u64(),\n});\n\n// Rust: crates/sui-types/src/effects/effects_v1.rs\nconst TransactionEffectsV1 = bcs.struct('TransactionEffectsV1', {\n\tstatus: ExecutionStatus,\n\texecutedEpoch: bcs.u64(),\n\tgasUsed: GasCostSummary,\n\tmodifiedAtVersions: bcs.vector(bcs.tuple([Address, bcs.u64()])),\n\tsharedObjects: bcs.vector(SuiObjectRef),\n\ttransactionDigest: ObjectDigest,\n\tcreated: bcs.vector(bcs.tuple([SuiObjectRef, Owner])),\n\tmutated: bcs.vector(bcs.tuple([SuiObjectRef, Owner])),\n\tunwrapped: bcs.vector(bcs.tuple([SuiObjectRef, Owner])),\n\tdeleted: bcs.vector(SuiObjectRef),\n\tunwrappedThenDeleted: bcs.vector(SuiObjectRef),\n\twrapped: bcs.vector(SuiObjectRef),\n\tgasObject: bcs.tuple([SuiObjectRef, Owner]),\n\teventsDigest: bcs.option(ObjectDigest),\n\tdependencies: bcs.vector(ObjectDigest),\n});\n\n// Rust: crates/sui-types/src/base_types.rs\nconst VersionDigest = bcs.tuple([bcs.u64(), ObjectDigest]);\n\n// Rust: crates/sui-types/src/effects/object_change.rs\nconst ObjectIn = bcs.enum('ObjectIn', {\n\tNotExist: null,\n\tExist: bcs.tuple([VersionDigest, Owner]),\n});\n\n// Rust: crates/sui-types/src/effects/object_change.rs\nconst AccumulatorAddress = bcs.struct('AccumulatorAddress', {\n\taddress: Address,\n\t// TODO: ask why this is the name\n\tty: TypeTag,\n});\n\n// Rust: crates/sui-types/src/effects/object_change.rs\nconst AccumulatorOperation = bcs.enum('AccumulatorOperation', {\n\tMerge: null,\n\tSplit: null,\n});\n\n// Rust: crates/sui-types/src/effects/object_change.rs\nconst AccumulatorValue = bcs.enum('AccumulatorValue', {\n\tInteger: bcs.u64(),\n\tIntegerTuple: bcs.tuple([bcs.u64(), bcs.u64()]),\n\t// NonEmpty<(u64, Digest)> in Rust - vector must have at least one element\n\tEventDigest: bcs.vector(bcs.tuple([bcs.u64(), ObjectDigest])),\n});\n\n// Rust: crates/sui-types/src/effects/object_change.rs\nconst AccumulatorWriteV1 = bcs.struct('AccumulatorWriteV1', {\n\taddress: AccumulatorAddress,\n\toperation: AccumulatorOperation,\n\tvalue: AccumulatorValue,\n});\n\n// Rust: crates/sui-types/src/effects/object_change.rs\nconst ObjectOut = bcs.enum('ObjectOut', {\n\tNotExist: null,\n\tObjectWrite: bcs.tuple([ObjectDigest, Owner]),\n\tPackageWrite: VersionDigest,\n\tAccumulatorWriteV1: AccumulatorWriteV1,\n});\n\n// Rust: crates/sui-types/src/effects/mod.rs\nconst IDOperation = bcs.enum('IDOperation', {\n\tNone: null,\n\tCreated: null,\n\tDeleted: null,\n});\n\n// Rust: crates/sui-types/src/effects/object_change.rs\nconst EffectsObjectChange = bcs.struct('EffectsObjectChange', {\n\tinputState: ObjectIn,\n\toutputState: ObjectOut,\n\tidOperation: IDOperation,\n});\n\n// Rust: crates/sui-types/src/effects/effects_v2.rs\nconst UnchangedConsensusKind = bcs.enum('UnchangedConsensusKind', {\n\tReadOnlyRoot: VersionDigest,\n\tMutateConsensusStreamEnded: bcs.u64(),\n\tReadConsensusStreamEnded: bcs.u64(),\n\tCancelled: bcs.u64(),\n\tPerEpochConfig: null,\n});\n\n// Rust: crates/sui-types/src/effects/effects_v2.rs\nconst TransactionEffectsV2 = bcs.struct('TransactionEffectsV2', {\n\tstatus: ExecutionStatus,\n\texecutedEpoch: bcs.u64(),\n\tgasUsed: GasCostSummary,\n\ttransactionDigest: ObjectDigest,\n\tgasObjectIndex: bcs.option(bcs.u32()),\n\teventsDigest: bcs.option(ObjectDigest),\n\tdependencies: bcs.vector(ObjectDigest),\n\tlamportVersion: bcs.u64(),\n\tchangedObjects: bcs.vector(bcs.tuple([Address, EffectsObjectChange])),\n\tunchangedConsensusObjects: bcs.vector(bcs.tuple([Address, UnchangedConsensusKind])),\n\tauxDataDigest: bcs.option(ObjectDigest),\n});\n\n// Rust: crates/sui-types/src/effects/mod.rs\nexport const TransactionEffects = bcs.enum('TransactionEffects', {\n\tV1: TransactionEffectsV1,\n\tV2: TransactionEffectsV2,\n});\n"],"mappings":"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"}